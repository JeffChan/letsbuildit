<!DOCTYPE html>
<html>
<head>
	<title>Ballz</title>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
	<script type="text/javascript" src="j/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="//code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script type="text/javascript" src="j/underscore-min.js"></script>
	<script type="text/javascript" src="j/three.min.js"></script>
	<script type="text/javascript" src="j/csg.js"></script>
	<script type="text/javascript" src="j/ThreeCSG.js"></script>
	<script type="text/javascript" src="j/TrackballControls.js"></script>
	<script type="text/javascript" src="j/GeometryExporter.js"></script>
	<script type="text/javascript" src="j/FileSaver.min.js"></script>

	<script type="text/javascript" src="j/app.js"></script>

	<script type="text/javascript">

	$(function() {

		window.app = new App({
			htmlContainer: '#container',
			width: 600,
			height: 450
		});

		window.demo = new App({
			htmlContainer: '#demo',
			width: 400,
			height: 300
		});
		$('#export').on('click', function(e) {
			e.preventDefault();
			app.export(true);
		});
		$('#file').on('change', function(e) {
			var file = e.target.files[0];
			var reader = new FileReader();
			reader.onload = (function(theFile) {
				return function(e) {
					demo.redrawPiece(demo.import(e.target.result));
				}
			})(file);
			reader.readAsText(file);
		});

		$('input.tool').on('click', function(e) {
			var tool = $(e.target);
			$('#tool').text(tool.val());
			app.setMode(tool.attr('id'));
		});

		$("#slider").slider({
			value: 5,
			min: 2,
			max: 50,
			step: 1,
			slide: function(event, ui) {
				$('#radius').val(ui.value);
				app.radius = $('#radius').val();
			}
		});
		$('#radius').val($('#slider').slider('value'));
		app.radius = $('#radius').val();
	});

	</script>
</head>

<body>

	<div id="container"></div>

	<div id="demo"></div>


	<div class="imex clear">
		<input type="button" value="Export" id="export" /><br/><br/>
		<strong>Import:</strong> <input type="file" id="file" />
	</div>

	<br/><br/>
	<div class="mode">
		<strong>Current:</strong> <span id="tool">Mill</span><br/>
		<p>
			<input type="button" value="Mill" id="mill" class="tool" />
			<input type="button" value="Drill Press" id="drill" class="tool" />
			<input type="button" value="Belt Sander" id="sander" class="tool" />
			<input type="button" value="Band Saw" id="saw" class="tool" />
			<input type="button" value="Lathe" id="lathe" class="tool" />
			<label for="radius">
				Size: <input type="text" id="radius" style="border: 0; color: red; font-weight: bold; font-size: 14px;" />
			</label>
		</p>


		<div id="slider"></div>
	</div>
	<!-- <textarea id="import"></textarea> -->
</body>

</html>